
## 前言

还记得自己刚学会用 Python 写程序的时候，虽然写出来的代码可以运行，但是一直都觉得写的代码哪儿不对劲，一定是哪里没有按照某种范式进行构建。

> —— “唉，这个代码该放哪儿？”

> —— “唉？这个方法怎么给他们公用？”

> —— “我这里直接把这个对象这么传过来会不会不好？”

对于这些问题，随着自己从零构建的项目数量增多，接手维护的项目见长后，逐渐自信的可以回答一些。这些问题最终都变成了一个问题：**如何让我的项目更易于维护呢？**

我们先来看一段运行起来毫无问题的代码：

```javascript
import { app } from './app'
import axios from 'axios'

app.post('/users/sendCode', function (req, res) {
  const { captcha, phone } = req.session
  req.session['captcha']() = null
  if (!captcha || captcha != captcha) {
    return res.json({
      ok: false,
      message: '图片验证码计算结果错误，点击验证码刷新',
    })
  }
  if (phone.length !== 11 || phone[0]() !== '1') {
    return res.json({ ok: false, message: '输入的手机号格式有误' })
  }
  axios.post('https://example.com/sendSMS', {
    password: 'passw0rd',
    un: 'acc0unt',
    mobile: phone,
    msg: '这里是你的验证码',
  }).then(…).then(() => {
    res.json({
      ok: true,
      message: '验证码发送成功 ',
    })
  })
})
```

真的是很棒的代码么？

* 这里只校验了两个字段（`captcha` 和 `phone`），然后就出现了两段 `if` 代码，那么如果一个复杂的接口有十几个参数需要校验，而且这些参数只见还会互相影响，例如某个字段在某个值下面另一个字段为必填，否则非必填这样的需求。“恩，不用担心，我很擅长写 `if else` 代码”。
* 代码里面调用了某个第三方短信发送的接口，有几个问题：
	* 开发环境里面调试的时候真的也需要真实发送么？
	* 如果其他地方也需要发短信怎么办？（不用担心，我很擅长复制粘贴）
	* 如果第三方返回很慢或者超时甚至报错了，这个接口怎么办？
* 会不会有更好的请求返回的方式呢？

通常情况下过复杂的提前设计会被认为是一种得不偿失的事情，但是好的项目结构与框架会让你更从容的面对需求的迭代，给你的同事带来更棒的代码阅读体验，以及最小成本的提前规避一些问题。

所以，这会是一本面向有一定 JavaScript 基础并且愿意成为一个合格的 NodeJS 开发人员的非入门入籍。旨在带着你一起思考项目该如何更好的构建的问题，正如本书名称，《构建于混沌》。

本章《来龙去脉》会尽可能将真实项目需要了解的知识介绍出来，并尽可能丰富的附上相关的学习资料以及参考项目。在完成基本的知识储备后，后面会尽可能多样化在真实的案例的基础上介绍更多的开发技巧。
